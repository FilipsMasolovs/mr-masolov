import React, { useState, useEffect } from "react";
import KUTE from "kute.js";
import "./header.css";

export default function Header(props) {
    const [isHamburgerActive, handleHamburger] = useState(false);

    useEffect(() => {
        const firstPath = document.querySelector('#first-path-1')
        if (firstPath) {
            const firstPathKUTE = KUTE.fromTo(
                '#first-path-1',
                { path: '#first-path-1' },
                { path: '#first-path-2' },
                { repeat: 999, duration: 3000, yoyo: true }
            )
            firstPathKUTE.start();
        }
        const secondPath = document.querySelector('#second-path-1')
        if (secondPath) {
            const secondPathKUTE = KUTE.fromTo(
                '#second-path-1',
                { path: '#second-path-1' },
                { path: '#second-path-2' },
                { repeat: 999, duration: 3000, yoyo: true }
            )
            secondPathKUTE.start();
        }
        const thirdPath = document.querySelector('#third-path-1')
        if (thirdPath) {
            const thirdPathKUTE = KUTE.fromTo(
                '#third-path-1',
                { path: '#third-path-1' },
                { path: '#third-path-2' },
                { repeat: 999, duration: 3000, yoyo: true }
            )
            thirdPathKUTE.start();
        }
        const forthPath = document.querySelector('#forth-path-1')
        if (forthPath) {
            const forthPathKUTE = KUTE.fromTo(
                '#forth-path-1',
                { path: '#forth-path-1' },
                { path: '#forth-path-2' },
                { repeat: 999, duration: 3000, yoyo: true }
            )
            forthPathKUTE.start();
        }
        const fithPath = document.querySelector('#fith-path-1')
        if (fithPath) {
            const fithPathKUTE = KUTE.fromTo(
                '#fith-path-1',
                { path: '#fith-path-1' },
                { path: '#fith-path-2' },
                { repeat: 999, duration: 3000, yoyo: true }
            )
            fithPathKUTE.start();
        }
    });

    const handleHamburgerClick = function (e) {
        e.currentTarget.classList.toggle("active");
        handleHamburger(!isHamburgerActive);
    };

    const handleNavigationClick = function (section) {
        const yOffset = -80;
        const element = document.getElementById(section);
        const y =
            element.getBoundingClientRect().top + window.pageYOffset + yOffset;

        // TODO
        // scrollTo behavior smooth doesn't seem to work on Windows
        window.scrollTo({ top: y, behavior: "smooth" });
    };

    let hamburgerContent = null;
    if (isHamburgerActive) {
        hamburgerContent = (
            <div className="mr-masolov-navigation-inner--sandwich-menu-inner">
                <h4 onClick={handleNavigationClick.bind(this, "experience")}>
                    Experience
                </h4>
                <h4 onClick={handleNavigationClick.bind(this, "portfolio")}>
                    Portfolio
                </h4>
                <h4 onClick={handleNavigationClick.bind(this, "skills")}>Skills</h4>
                <h4 onClick={handleNavigationClick.bind(this, "contacts")}>Contact</h4>
            </div>
        );
    }

    return (
        <>
            <div className="mr-masolov-header" id="home">
                <div className="mr-masolov-header-inner">
                    <h3>
                        It's nice to meet you
                        {props.visitorName ? ", " + props.visitorName : ""}.
                    </h3>
                    <h1>My name is Filipp</h1>
                    <h3>I am a frontend developer.</h3>
                    <svg className="mr-masolov-header-inner--accent" viewBox="0 0 2048 600" width="2048" height="600">
                        <path id="first-path-1" d="M0 370L48.8 373C97.7 376 195.3 382 292.8 383.8C390.3 385.7 487.7 383.3 585.2 393C682.7 402.7 780.3 424.3 877.8 423.2C975.3 422 1072.7 398 1170.2 387.8C1267.7 377.7 1365.3 381.3 1462.8 385.2C1560.3 389 1657.7 393 1755.2 401C1852.7 409 1950.3 421 1999.2 427L2048 433L2048 601L1999.2 601C1950.3 601 1852.7 601 1755.2 601C1657.7 601 1560.3 601 1462.8 601C1365.3 601 1267.7 601 1170.2 601C1072.7 601 975.3 601 877.8 601C780.3 601 682.7 601 585.2 601C487.7 601 390.3 601 292.8 601C195.3 601 97.7 601 48.8 601L0 601Z" fill="#101a86"></path>
                        <path id="second-path-1" d="M0 447L48.8 443C97.7 439 195.3 431 292.8 429.2C390.3 427.3 487.7 431.7 585.2 431.7C682.7 431.7 780.3 427.3 877.8 421.3C975.3 415.3 1072.7 407.7 1170.2 416.8C1267.7 426 1365.3 452 1462.8 463.8C1560.3 475.7 1657.7 473.3 1755.2 462.7C1852.7 452 1950.3 433 1999.2 423.5L2048 414L2048 601L1999.2 601C1950.3 601 1852.7 601 1755.2 601C1657.7 601 1560.3 601 1462.8 601C1365.3 601 1267.7 601 1170.2 601C1072.7 601 975.3 601 877.8 601C780.3 601 682.7 601 585.2 601C487.7 601 390.3 601 292.8 601C195.3 601 97.7 601 48.8 601L0 601Z" fill="#0e177b"></path>
                        <path id="third-path-1" d="M0 503L48.8 494.7C97.7 486.3 195.3 469.7 292.8 467.8C390.3 466 487.7 479 585.2 484C682.7 489 780.3 486 877.8 477C975.3 468 1072.7 453 1170.2 456.3C1267.7 459.7 1365.3 481.3 1462.8 488.3C1560.3 495.3 1657.7 487.7 1755.2 483.2C1852.7 478.7 1950.3 477.3 1999.2 476.7L2048 476L2048 601L1999.2 601C1950.3 601 1852.7 601 1755.2 601C1657.7 601 1560.3 601 1462.8 601C1365.3 601 1267.7 601 1170.2 601C1072.7 601 975.3 601 877.8 601C780.3 601 682.7 601 585.2 601C487.7 601 390.3 601 292.8 601C195.3 601 97.7 601 48.8 601L0 601Z" fill="#0c1470"></path>
                        <path id="forth-path-1" d="M0 518L48.8 517.7C97.7 517.3 195.3 516.7 292.8 517.8C390.3 519 487.7 522 585.2 519.5C682.7 517 780.3 509 877.8 512C975.3 515 1072.7 529 1170.2 531.5C1267.7 534 1365.3 525 1462.8 517.3C1560.3 509.7 1657.7 503.3 1755.2 501.5C1852.7 499.7 1950.3 502.3 1999.2 503.7L2048 505L2048 601L1999.2 601C1950.3 601 1852.7 601 1755.2 601C1657.7 601 1560.3 601 1462.8 601C1365.3 601 1267.7 601 1170.2 601C1072.7 601 975.3 601 877.8 601C780.3 601 682.7 601 585.2 601C487.7 601 390.3 601 292.8 601C195.3 601 97.7 601 48.8 601L0 601Z" fill="#0a1165"></path>
                        <path id="fith-path-1" d="M0 566L48.8 565.7C97.7 565.3 195.3 564.7 292.8 558.5C390.3 552.3 487.7 540.7 585.2 537.7C682.7 534.7 780.3 540.3 877.8 547.7C975.3 555 1072.7 564 1170.2 560.7C1267.7 557.3 1365.3 541.7 1462.8 533.7C1560.3 525.7 1657.7 525.3 1755.2 526.3C1852.7 527.3 1950.3 529.7 1999.2 530.8L2048 532L2048 601L1999.2 601C1950.3 601 1852.7 601 1755.2 601C1657.7 601 1560.3 601 1462.8 601C1365.3 601 1267.7 601 1170.2 601C1072.7 601 975.3 601 877.8 601C780.3 601 682.7 601 585.2 601C487.7 601 390.3 601 292.8 601C195.3 601 97.7 601 48.8 601L0 601Z" fill="#080f5b"></path>

                        <path id="first-path-2" style={{ visibility: "hidden" }} d="M0 380L48.8 378.3C97.7 376.7 195.3 373.3 292.8 374.5C390.3 375.7 487.7 381.3 585.2 386.5C682.7 391.7 780.3 396.3 877.8 399.2C975.3 402 1072.7 403 1170.2 404.2C1267.7 405.3 1365.3 406.7 1462.8 398.3C1560.3 390 1657.7 372 1755.2 369.7C1852.7 367.3 1950.3 380.7 1999.2 387.3L2048 394L2048 601L1999.2 601C1950.3 601 1852.7 601 1755.2 601C1657.7 601 1560.3 601 1462.8 601C1365.3 601 1267.7 601 1170.2 601C1072.7 601 975.3 601 877.8 601C780.3 601 682.7 601 585.2 601C487.7 601 390.3 601 292.8 601C195.3 601 97.7 601 48.8 601L0 601Z" fill="#101a86"></path>
                        <path id="second-path-2" style={{ visibility: "hidden" }} d="M0 473L48.8 469.2C97.7 465.3 195.3 457.7 292.8 454.8C390.3 452 487.7 454 585.2 447.5C682.7 441 780.3 426 877.8 416.7C975.3 407.3 1072.7 403.7 1170.2 402.2C1267.7 400.7 1365.3 401.3 1462.8 401.7C1560.3 402 1657.7 402 1755.2 402C1852.7 402 1950.3 402 1999.2 402L2048 402L2048 601L1999.2 601C1950.3 601 1852.7 601 1755.2 601C1657.7 601 1560.3 601 1462.8 601C1365.3 601 1267.7 601 1170.2 601C1072.7 601 975.3 601 877.8 601C780.3 601 682.7 601 585.2 601C487.7 601 390.3 601 292.8 601C195.3 601 97.7 601 48.8 601L0 601Z" fill="#0e177b"></path>
                        <path id="third-path-2" style={{ visibility: "hidden" }} d="M0 479L48.8 481.2C97.7 483.3 195.3 487.7 292.8 491.7C390.3 495.7 487.7 499.3 585.2 498.3C682.7 497.3 780.3 491.7 877.8 487.2C975.3 482.7 1072.7 479.3 1170.2 471.8C1267.7 464.3 1365.3 452.7 1462.8 458.3C1560.3 464 1657.7 487 1755.2 488.3C1852.7 489.7 1950.3 469.3 1999.2 459.2L2048 449L2048 601L1999.2 601C1950.3 601 1852.7 601 1755.2 601C1657.7 601 1560.3 601 1462.8 601C1365.3 601 1267.7 601 1170.2 601C1072.7 601 975.3 601 877.8 601C780.3 601 682.7 601 585.2 601C487.7 601 390.3 601 292.8 601C195.3 601 97.7 601 48.8 601L0 601Z" fill="#0c1470"></path>
                        <path id="forth-path-2" style={{ visibility: "hidden" }} d="M0 501L48.8 503.7C97.7 506.3 195.3 511.7 292.8 517.8C390.3 524 487.7 531 585.2 527C682.7 523 780.3 508 877.8 502.7C975.3 497.3 1072.7 501.7 1170.2 509.3C1267.7 517 1365.3 528 1462.8 526.5C1560.3 525 1657.7 511 1755.2 508.2C1852.7 505.3 1950.3 513.7 1999.2 517.8L2048 522L2048 601L1999.2 601C1950.3 601 1852.7 601 1755.2 601C1657.7 601 1560.3 601 1462.8 601C1365.3 601 1267.7 601 1170.2 601C1072.7 601 975.3 601 877.8 601C780.3 601 682.7 601 585.2 601C487.7 601 390.3 601 292.8 601C195.3 601 97.7 601 48.8 601L0 601Z" fill="#0a1165"></path>
                        <path id="fith-path-2" style={{ visibility: "hidden" }} d="M0 532L48.8 536.8C97.7 541.7 195.3 551.3 292.8 551.2C390.3 551 487.7 541 585.2 542.3C682.7 543.7 780.3 556.3 877.8 556.5C975.3 556.7 1072.7 544.3 1170.2 541.8C1267.7 539.3 1365.3 546.7 1462.8 551.2C1560.3 555.7 1657.7 557.3 1755.2 558C1852.7 558.7 1950.3 558.3 1999.2 558.2L2048 558L2048 601L1999.2 601C1950.3 601 1852.7 601 1755.2 601C1657.7 601 1560.3 601 1462.8 601C1365.3 601 1267.7 601 1170.2 601C1072.7 601 975.3 601 877.8 601C780.3 601 682.7 601 585.2 601C487.7 601 390.3 601 292.8 601C195.3 601 97.7 601 48.8 601L0 601Z" fill="#080f5b"></path>
                    </svg>
                </div>
            </div>
            <div className="mr-masolov-navigation">
                <div className="mr-masolov-navigation-inner">
                    <svg onClick={handleNavigationClick.bind(this, "home")} className="mr-masolov-navigation-inner--logo" width="512" height="512" viewBox="0 0 512 512" fill="none">
                        <rect x="18" y="19.8262" width="477" height="471.382" stroke="#15DB95" strokeWidth="8" />
                        <path d="M383.391 317.533L384.875 324.584C384.875 327.553 383.329 331.078 380.236 335.16C372.072 345.798 358.96 358.044 340.9 371.898C322.964 385.629 309.729 392.494 301.193 392.494C292.658 392.494 285.979 390.02 281.154 385.072C276.33 380.001 273.918 374.249 273.918 367.816C273.918 360.147 281.958 343.201 298.039 316.977C322.16 278.012 352.961 232.491 390.441 180.414C382.525 188.578 361.496 210.596 327.355 246.469C251.776 325.635 207.616 370.476 194.875 380.99C192.772 382.722 189.68 383.588 185.598 383.588C181.639 383.588 177.434 381.98 172.98 378.764C168.527 375.424 166.301 371.713 166.301 367.631V366.703C166.796 361.508 178.732 336.088 202.111 290.443C225.49 244.799 245.096 208.493 260.93 181.527C237.551 207.257 213.924 235.954 190.051 267.621C144.654 327.738 111.441 378.949 90.4121 421.254C88.5566 425.212 86.2682 427.191 83.5469 427.191C80.8255 427.191 76.8672 426.511 71.6719 425.15C60.7865 422.182 55.3438 416.986 55.3438 409.564C55.3438 405.111 64.4355 389.216 82.6191 361.879C100.803 334.418 121.893 304.483 145.891 272.074C169.888 239.542 194.751 208.246 220.48 178.188C255.982 136.625 278.804 115.844 288.947 115.844C290.555 115.844 292.102 116.277 293.586 117.143C295.07 117.885 295.998 118.256 296.369 118.256C296.74 118.256 297.111 118.07 297.482 117.699C299.09 115.72 302.245 114.73 306.945 114.73C311.77 114.73 316.408 115.658 320.861 117.514C325.438 119.369 327.727 121.472 327.727 123.822C327.727 125.307 321.542 137.12 309.172 159.262C267.733 232.738 239.901 283.207 225.676 310.668C239.283 294.216 258.703 272.383 283.938 245.17C309.296 217.956 335.891 190.805 363.723 163.715C399.966 128.585 421.613 111.02 428.664 111.02C431.509 111.02 435.096 111.638 439.426 112.875C447.095 115.102 454.455 116.215 461.506 116.215C463.485 116.586 465.155 117.452 466.516 118.812C468 120.049 468.742 121.348 468.742 122.709C468.742 124.07 468.371 125.183 467.629 126.049C427.427 179.486 393.534 226.615 365.949 267.436C338.365 308.256 321.356 335.84 314.924 350.189C327.912 347.468 347.271 331.944 373 303.617C374.113 302.133 374.917 301.143 375.412 300.648C375.907 300.154 376.34 299.659 376.711 299.164C378.814 296.69 380.422 298.236 381.535 303.803C382.03 307.019 382.339 309.307 382.463 310.668C382.71 311.905 382.896 313.266 383.02 314.75C383.267 316.111 383.391 317.038 383.391 317.533Z" fill="#15DB95" />
                    </svg>
                    <div
                        className="mr-masolov-navigation-inner--sandwich-menu"
                        onClick={handleHamburgerClick}
                    >
                        <div className="bar1" />
                        <div className="bar2" />
                        <div className="bar3" />
                        {hamburgerContent}
                    </div>
                    <div className="mr-masolov-navigation-inner--menu">
                        <h4 onClick={handleNavigationClick.bind(this, "experience")}>
                            Experience
                        </h4>
                        <h4 onClick={handleNavigationClick.bind(this, "portfolio")}>
                            Portfolio
                        </h4>
                        <h4 onClick={handleNavigationClick.bind(this, "skills")}>Skills</h4>
                        <h4 onClick={handleNavigationClick.bind(this, "contacts")}>
                            Contact
                        </h4>
                    </div>
                </div>
            </div>
        </>
    );
}
